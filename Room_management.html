<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Room Management</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      background-color: #f5f5f5;
    }

    .card {
      border-radius: 10px;
    }

    .status-paid {
      color: green;
      font-weight: 600;
    }

    .status-overdue {
      color: red;
      font-weight: 600;
    }

    .status-partial {
      color: orange;
      font-weight: 600;
    }

    .status-available {
      color: #555;
    }
  </style>
</head>
<body>



<div class="container my-5">
  <div class="card p-4 shadow-sm">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">Room Management</h4>
      <button class="btn btn-dark btn-sm" data-bs-toggle="modal" data-bs-target="#addRoomModal">
        + Add Room
      </button>
    </div>

    <!-- Search & Filter -->
    <div class="row mb-3">
      <div class="col-md-6">
        <input type="text" id="searchInput" class="form-control" placeholder="Search room number...">
      </div>
      <div class="col-md-3">
        <select id="occupancyFilter" class="form-select">
          <option value="">Occupancy</option>
          <option value="Available">Available</option>
          <option value="Occupied">Occupied</option>
          <option value="Under Maintenance">Under Maintenance</option>
        </select>
      </div>
      <div class="col-md-3">
        <select id="paymentFilter" class="form-select">
          <option value="">Payment Status</option>
          <option value="Paid">Paid</option>
          <option value="Overdue">Overdue</option>
          <option value="Partially Paid">Partially Paid</option>
          <option value="Unpaid">Unpaid</option>
        </select>
      </div>
    </div>

    <!-- Table -->
    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>Room Number</th>
            <th>Occupancy</th>
            <th>Tenant Name(s)</th>
            <th>No. of Occupants</th>
            <th>Monthly Rent</th>
            <th>Room Capacity</th>
            <th>Payment Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="roomTable">
          <tr>
            <td>A-089</td>
            <td>Occupied</td>
            <td>Mr. & Mrs. Dela Cruz</td>
            <td>2</td>
            <td>₱4,000.00</td>
            <td>4</td>
            <td class="status-paid">Paid</td>
            <td><button class="btn btn-outline-secondary btn-sm">Edit</button></td>
          </tr>
          <tr>
            <td>A-090</td>
            <td>Occupied</td>
            <td>Bernard Aguilar</td>
            <td>1</td>
            <td>₱2,000.00</td>
            <td>4</td>
            <td class="status-overdue">Overdue</td>
            <td><button class="btn btn-outline-secondary btn-sm">Edit</button></td>
          </tr>
          <tr>
            <td>B-001</td>
            <td>Available</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>4</td>
            <td class="status-available">-</td>
            <td><button class="btn btn-outline-secondary btn-sm">Edit</button></td>
          </tr>
          <tr>
            <td>C-034</td>
            <td>Occupied</td>
            <td>Kath Uson, Jamilla Mars, Kiah Smith</td>
            <td>3</td>
            <td>₱6,000.00</td>
            <td>4</td>
            <td class="status-partial">Partially Paid</td>
            <td><button class="btn btn-outline-secondary btn-sm">Edit</button></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>

<!-- Add Room Modal -->
<div class="modal fade" id="addRoomModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Add Room</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Add modal-body for padding -->
      <div class="modal-body">
        <div class="mb-2">
          <label>Room Number</label>
          <input
            type="text"
            id="roomNumber"
            class="form-control"
            maxlength="10"
            placeholder="e.g. A-101"
            oninput="
              this.value = this.value
                .replace(/[^A-Za-z0-9-]/g, '')
                .slice(0, 10);
            ">
          <div class="text-danger small d-none" id="roomError">
            Room number is required.
          </div>
        </div>

        <div class="mb-2">
          <label>Monthly Rent</label>
          <input
            type="number"
            id="monthlyRent"
            class="form-control"
            min="1"
            max="10000"
            oninput="
              if (this.value < 1) this.value = 1;
              if (this.value > 10000) this.value = 10000;
            ">
          <div class="text-danger small d-none" id="rentError">
            Rent must be between ₱1 and ₱10,000.
          </div>
        </div>

        <div class="mb-2">
          <label>Room Capacity</label>
          <input
            type="number"
            id="capacity"
            class="form-control"
            min="1"
            max="20">
          <div class="text-danger small d-none" id="capacityError">
            Capacity must be between 1 and 20.
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-dark" onclick="addRoom()">Save</button>
      </div>

    </div>
  </div>
</div>




<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const searchInput = document.getElementById("searchInput");
  const occupancyFilter = document.getElementById("occupancyFilter");
  const paymentFilter = document.getElementById("paymentFilter");

  searchInput.addEventListener("keyup", filterTable);
  occupancyFilter.addEventListener("change", filterTable);
  paymentFilter.addEventListener("change", filterTable);

  function filterTable() {
    const search = searchInput.value.toLowerCase();
    const occupancy = occupancyFilter.value;
    const payment = paymentFilter.value;

    const rows = document.querySelectorAll("#roomTable tr");

    rows.forEach(row => {
      const room = row.cells[0].innerText.toLowerCase();
      const occ = row.cells[1].innerText;
      const pay = row.cells[6].innerText;

      const matchSearch = room.includes(search);
      const matchOcc = occupancy === "" || occ === occupancy;
      const matchPay = payment === "" || pay === payment;

      row.style.display = matchSearch && matchOcc && matchPay ? "" : "none";
    });
  }

  function addRoom() {
  const room = document.getElementById("roomNumber");
  const rent = document.getElementById("monthlyRent");
  const capacity = document.getElementById("capacity");

  const roomError = document.getElementById("roomError");
  const rentError = document.getElementById("rentError");
  const capacityError = document.getElementById("capacityError");

  let isValid = true;

  // Reset states
  [room, rent, capacity].forEach(i => i.classList.remove("is-invalid"));
  [roomError, rentError, capacityError].forEach(e => e.classList.add("d-none"));

  // Room validation
  if (!room.value.trim()) {
    room.classList.add("is-invalid");
    roomError.classList.remove("d-none");
    isValid = false;
  }

  // Rent validation
  const rentValue = Number(rent.value);
  if (rentValue < 1 || rentValue > 10000) {
    rent.classList.add("is-invalid");
    rentError.classList.remove("d-none");
    isValid = false;
  }

  // Capacity validation
  const capacityValue = Number(capacity.value);
  if (capacityValue < 1 || capacityValue > 20) {
    capacity.classList.add("is-invalid");
    capacityError.classList.remove("d-none");
    isValid = false;
  }

  if (!isValid) return;

  // Insert row
  const table = document.getElementById("roomTable");
  const row = table.insertRow();

  row.innerHTML = `
    <td>${room.value}</td>
    <td>Available</td>
    <td>-</td>
    <td>-</td>
    <td>₱${rentValue.toLocaleString()}</td>
    <td>${capacityValue}</td>
    <td>-</td>
    <td><button class="btn btn-outline-secondary btn-sm">Edit</button></td>
  `;

  // Reset form
  room.value = "";
  rent.value = "";
  capacity.value = "";

  const modal = bootstrap.Modal.getInstance(
    document.getElementById("addRoomModal")
  );
  modal.hide();
}


</script>

</body>
</html>
